<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–í–∞—à –†–µ–π—Ç–∏–Ω–≥</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>‚≠êMy Stars‚≠ê</h1>
            <div class="sync-status" id="syncStatus">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...</div>
        </header>

        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ -->
        <div id="mainPage" class="page active">
            <!-- –†–µ–π—Ç–∏–Ω–≥ –∑–∞ –Ω–µ–¥–µ–ª—é -->
            <div class="rating-section">
                <div class="rating-container week" id="weekRatingContainer">
                    <!-- –†–µ–π—Ç–∏–Ω–≥ –∑–∞ –Ω–µ–¥–µ–ª—é –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –†–µ–π—Ç–∏–Ω–≥ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è -->
            <div class="rating-section">
                <div class="rating-container total" id="totalRatingContainer">
                    <!-- –†–µ–π—Ç–∏–Ω–≥ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-blue" onclick="showPage('worksPage')">üìÑ –í–∞—à–∏ —Ä–∞–±–æ—Ç—ã</button>
                <button class="nav-btn-help" onclick="showPage('helpPage')">‚ùì –ö–∞–∫ –æ–±—ä—è—Å–Ω–∏—Ç—å –æ—à–∏–±–∫–∏?</button>
                <button class="nav-btn-admin" onclick="showPasswordPage()">‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞</button>
            </div>
        </div>
 <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ -->
        <div id="passwordPage" class="page">
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="color: #ff4444; text-shadow: 0 0 15px rgba(255, 68, 68, 0.7); font-size: 1.4em;">
                    üîê –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ
                </h2>
                <p style="color: #aaa; margin-bottom: 20px;">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</p>
            </div>

            <div class="password-form" style="max-width: 300px; margin: 0 auto;">
                <input type="password" 
                       id="adminPassword" 
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" 
                       style="width: 100%; padding: 12px; margin-bottom: 15px; background: #1a1a1a; color: white; border: 2px solid #ff4444; border-radius: 8px; font-size: 1em; text-align: center;">
                
                <button onclick="checkAdminPassword()" class="password-btn" style="width: 100%; padding: 12px; background: #ff4444; color: white; border: none; border-radius: 8px; font-size: 1em; font-weight: bold; cursor: pointer; transition: all 0.2s ease;">
                    üîì –í–æ–π—Ç–∏
                </button>
                
                <div id="passwordError" style="color: #ff4444; text-align: center; margin-top: 15px; font-size: 0.9em; display: none;">
                    ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!
                </div>
            </div>

            <div class="nav-buttons" style="margin-top: 30px;">
                <button class="nav-btn-yellow" onclick="showPage('mainPage')">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
            </div>
        </div>
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–æ—â–∏ -->
        <div id="helpPage" class="page">
            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #9370db; text-shadow: 0 0 15px rgba(147, 112, 219, 0.7); font-size: 1.4em;">
                    ‚ùì –ö–∞–∫ –æ–±—ä—è—Å–Ω–∏—Ç—å –æ—à–∏–±–∫–∏?
                </h2>
                <button id="toggleModeBtn" class="toggle-mode-btn" onclick="toggleHelpMode()">
                    üîß –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                </button>
            </div>

            <!-- –†–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) -->
            <div id="adminMode" style="display: none;">
                <div class="help-admin-section">
                    <div class="admin-controls">
                        <button class="add-section-btn" onclick="addNewSection()">+ –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª</button>
                    </div>
                    
                    <div class="sections-list" id="sectionsList">
                        <!-- –°–ø–∏—Å–æ–∫ —Ä–∞–∑–¥–µ–ª–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                    
                    <div class="editor-container" id="editorContainer" style="display: none;">
                        <!-- –†–µ–¥–∞–∫—Ç–æ—Ä –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>

            <!-- –†–µ–∂–∏–º —É—á–µ–Ω–∏–∫–∞ (–ø—Ä–æ—Å–º–æ—Ç—Ä) -->
            <div id="studentMode">
                <div class="help-sections-view" id="helpSectionsView">
                    <!-- –†–∞–∑–¥–µ–ª—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-yellow" onclick="showPage('mainPage')">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞–±–æ—Ç -->
        <div id="worksPage" class="page">
            <div class="date-picker">
                <input type="date" class="date-input" id="workDate">
            </div>

            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #0066ff; text-shadow: 0 0 15px rgba(0, 100, 255, 0.7); font-size: 1.4em;">
                    üìÑ –í–∞—à–∏ –†–∞–±–æ—Ç—ã
                </h2>
            </div>

            <div class="students-grid" id="studentsGrid"></div>

            <div class="student-works-section" id="studentWorksSection">
                <div class="selected-student-header">
                    <div class="selected-student-name" id="selectedStudentName">üìÑ –í–∞—à–∏ –†–∞–±–æ—Ç—ã</div>
                    <button class="close-works" onclick="closeStudentWorks()">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
                <div id="worksList"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-yellow" onclick="showPage('mainPage')">‚≠ê –ö —Ä–µ–π—Ç–∏–Ω–≥–∞–º</button>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏ -->
        <div id="adminPage" class="page">
            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #ff4444; text-shadow: 0 0 15px rgba(255, 68, 68, 0.7); font-size: 1.4em;">
                    ‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –í–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ–¥–µ–ª–∏
                </h2>
            </div>

            <div class="admin-section">
                <div class="admin-input-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–¥–µ–ª—é:</label>
                    <input type="week" id="weekSelector" class="week-selector">
                </div>

                <div class="admin-columns">
                    <!-- –ö–æ–ª–æ–Ω–∫–∞ –õ—É—á—à–∏–µ –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏ -->
                    <div class="admin-column">
                        <h3 class="admin-column-title">üèÉ –õ—É—á—à–∏–µ –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏</h3>
                        <div id="speedRankings"></div>
                    </div>

                    <!-- –ö–æ–ª–æ–Ω–∫–∞ –õ—É—á—à–∏–µ –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏ -->
                    <div class="admin-column">
                        <h3 class="admin-column-title">üéØ –õ—É—á—à–∏–µ –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏</h3>
                        <div id="accuracyRankings"></div>
                    </div>
                </div>

                <div class="admin-stats">
                    <div>–ò—Ç–æ–≥–æ –æ—á–∫–æ–≤ –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å: <span id="speedTotal">0</span></div>
                    <div>–ò—Ç–æ–≥–æ –æ—á–∫–æ–≤ –∑–∞ —Ç–æ—á–Ω–æ—Å—Ç—å: <span id="accuracyTotal">0</span></div>
                    <div>–í—Å–µ–≥–æ –æ—á–∫–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é: <span id="weekTotal">0</span></div>
                </div>

                <div class="admin-buttons">
                    <button class="admin-save-btn" onclick="saveWeekRankings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
                    <button class="admin-reset-btn" onclick="clearWeekRankings()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-yellow" onclick="showPage('mainPage')">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–º–æ—â–∏ -->
        <div id="sectionModal" class="modal">
            <div class="modal-content-section" style="background: #1a1a1a; padding: 20px; border-radius: 10px; max-width: 400px; margin: 100px auto;">
                <h3 style="color: #9370db; margin-bottom: 15px;">–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª</h3>
                <input type="text" id="sectionNameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ê—Ä—Ç–∏–∫–ª–∏)" 
                       style="width: 100%; padding: 10px; margin-bottom: 15px; background: #2a2a2a; color: white; border: 2px solid #9370db; border-radius: 5px;">
                <div style="display: flex; gap: 10px;">
                    <button onclick="closeSectionModal()" class="cancel-btn" style="flex: 1; padding: 10px; background: #555; color: white; border: none; border-radius: 5px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
                    <button onclick="saveNewSection()" class="save-btn" style="flex: 1; padding: 10px; background: #9370db; color: white; border: none; border-radius: 5px; cursor: pointer;">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="fullscreenImage">
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>
