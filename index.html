<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–í–∞—à –†–µ–π—Ç–∏–Ω–≥</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>‚≠êMy Stars‚≠ê</h1>
            <div class="sync-status" id="syncStatus">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...</div>
        </header>

        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ -->
        <div id="mainPage" class="page active">
            <!-- –†–µ–π—Ç–∏–Ω–≥ –∑–∞ –Ω–µ–¥–µ–ª—é -->
            <div class="rating-section">
                <h2 class="rating-title">üèÜ –†–µ–π—Ç–∏–Ω–≥ –∑–∞ –Ω–µ–¥–µ–ª—é</h2>
                <div class="week-rating-container">
                    <div class="week-rating-list" id="weekRatingList"></div>
                </div>
            </div>

            <!-- –†–µ–π—Ç–∏–Ω–≥ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è -->
            <div class="rating-section">
                <h2 class="rating-title">‚≠ê –†–µ–π—Ç–∏–Ω–≥ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è</h2>
                <div class="total-rating-container">
                    <div class="total-rating-list" id="totalRatingList"></div>
                </div>
            </div>

            <div class="rating-section">
                <h2 class="rating-title">¬´–ù–µ –∂–¥–∏ —Ñ–∏–Ω–∏—à–∞ ‚Äî –±—É–¥—å —Å—Ç–∞—Ä—Ç–æ–º!¬ª</h2>
                <div class="student-list" id="rating1List"></div>
            </div>

            <div class="rating-section">
                <h2 class="rating-title">100% ‚Äî –Ω–µ –º–µ—á—Ç–∞. –≠—Ç–æ —Ç–≤–æ–π —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å!</h2>
                <div class="student-list" id="rating2List"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-blue" onclick="showPage('worksPage')">üìÑ –í–∞—à–∏ —Ä–∞–±–æ—Ç—ã</button>
                <button class="nav-btn-admin" onclick="showPage('adminPage')">‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞</button>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞–±–æ—Ç -->
        <div id="worksPage" class="page">
            <div class="date-picker">
                <input type="date" class="date-input" id="workDate">
            </div>

            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #0066ff; text-shadow: 0 0 15px rgba(0, 100, 255, 0.7); font-size: 1.4em;">
                    üìÑ –í–∞—à–∏ –†–∞–±–æ—Ç—ã
                </h2>
            </div>

            <div class="students-grid" id="studentsGrid"></div>

            <div class="student-works-section" id="studentWorksSection">
                <div class="selected-student-header">
                    <div class="selected-student-name" id="selectedStudentName">üìÑ –í–∞—à–∏ –†–∞–±–æ—Ç—ã</div>
                    <button class="close-works" onclick="closeStudentWorks()">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
                <div id="worksList"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-yellow" onclick="showPage('mainPage')">‚≠ê –ö —Ä–µ–π—Ç–∏–Ω–≥–∞–º</button>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏ -->
        <div id="adminPage" class="page">
            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #ff4444; text-shadow: 0 0 15px rgba(255, 68, 68, 0.7); font-size: 1.4em;">
                    ‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –í–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ–¥–µ–ª–∏
                </h2>
            </div>

            <div class="admin-section">
                <div class="admin-input-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–¥–µ–ª—é:</label>
                    <input type="week" id="weekSelector" class="week-selector">
                </div>

                <div class="admin-columns">
                    <!-- –ö–æ–ª–æ–Ω–∫–∞ –õ—É—á—à–∏–µ –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏ -->
                    <div class="admin-column">
                        <h3 class="admin-column-title">üèÉ –õ—É—á—à–∏–µ –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏</h3>
                        <div id="speedRankings"></div>
                    </div>

                    <!-- –ö–æ–ª–æ–Ω–∫–∞ –õ—É—á—à–∏–µ –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏ -->
                    <div class="admin-column">
                        <h3 class="admin-column-title">üéØ –õ—É—á—à–∏–µ –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏</h3>
                        <div id="accuracyRankings"></div>
                    </div>
                </div>

                <div class="admin-stats">
                    <div>–ò—Ç–æ–≥–æ –æ—á–∫–æ–≤ –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å: <span id="speedTotal">0</span></div>
                    <div>–ò—Ç–æ–≥–æ –æ—á–∫–æ–≤ –∑–∞ —Ç–æ—á–Ω–æ—Å—Ç—å: <span id="accuracyTotal">0</span></div>
                    <div>–í—Å–µ–≥–æ –æ—á–∫–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é: <span id="weekTotal">0</span></div>
                </div>

                <div class="admin-buttons">
                    <button class="admin-save-btn" onclick="saveWeekRankings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
                    <button class="admin-reset-btn" onclick="clearWeekRankings()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-yellow" onclick="showPage('mainPage')">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="fullscreenImage">
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>
