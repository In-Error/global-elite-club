<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Р’Р°С€ Р РµР№С‚РёРЅРі</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>в­ђMy Starsв­ђ</h1>
            <div class="sync-status" id="syncStatus">рџ”„ РЎРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ...</div>
        </header>

        <!-- Р“Р»Р°РІРЅР°СЏ СЃС‚СЂР°РЅРёС†Р° СЃ СЂРµР№С‚РёРЅРіР°РјРё -->
        <div id="mainPage" class="page active">
            <!-- Р РµР№С‚РёРЅРі Р·Р° РЅРµРґРµР»СЋ -->
            <div class="rating-section">
                <div class="rating-container week" id="weekRatingContainer">
                    <!-- Р РµР№С‚РёРЅРі Р·Р° РЅРµРґРµР»СЋ Р±СѓРґРµС‚ Р·Р°РіСЂСѓР¶РµРЅ Р·РґРµСЃСЊ -->
                </div>
            </div>

            <!-- Р РµР№С‚РёРЅРі Р·Р° РІСЃРµ РІСЂРµРјСЏ -->
            <div class="rating-section">
                <div class="rating-container total" id="totalRatingContainer">
                    <!-- Р РµР№С‚РёРЅРі Р·Р° РІСЃРµ РІСЂРµРјСЏ Р±СѓРґРµС‚ Р·Р°РіСЂСѓР¶РµРЅ Р·РґРµСЃСЊ -->
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-blue" onclick="showPage('worksPage')">рџ“„ Р’Р°С€Рё СЂР°Р±РѕС‚С‹</button>
                <button class="nav-btn-admin" onclick="showPage('adminPage')">вљ™пёЏ РђРґРјРёРЅРєР°</button>
            </div>
        </div>

        <!-- РЎС‚СЂР°РЅРёС†Р° РїСЂРѕСЃРјРѕС‚СЂР° СЂР°Р±РѕС‚ -->
        <div id="worksPage" class="page">
            <div class="date-picker">
                <input type="date" class="date-input" id="workDate">
            </div>

            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #0066ff; text-shadow: 0 0 15px rgba(0, 100, 255, 0.7); font-size: 1.4em;">
                    рџ“„ Р’Р°С€Рё Р Р°Р±РѕС‚С‹
                </h2>
            </div>

            <div class="students-grid" id="studentsGrid"></div>

            <div class="student-works-section" id="studentWorksSection">
                <div class="selected-student-header">
                    <div class="selected-student-name" id="selectedStudentName">рџ“„ Р’Р°С€Рё Р Р°Р±РѕС‚С‹</div>
                    <button class="close-works" onclick="closeStudentWorks()">вњ• Р—Р°РєСЂС‹С‚СЊ</button>
                </div>
                <div id="worksList"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-yellow" onclick="showPage('mainPage')">в­ђ Рљ СЂРµР№С‚РёРЅРіР°Рј</button>
            </div>
        </div>

        <!-- РЎС‚СЂР°РЅРёС†Р° Р°РґРјРёРЅРєРё -->
        <div id="adminPage" class="page">
            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #ff4444; text-shadow: 0 0 15px rgba(255, 68, 68, 0.7); font-size: 1.4em;">
                    вљ™пёЏ РђРґРјРёРЅ-РїР°РЅРµР»СЊ - Р’РІРѕРґ СЂРµР·СѓР»СЊС‚Р°С‚РѕРІ РЅРµРґРµР»Рё
                </h2>
            </div>

            <div class="admin-section">
                <div class="admin-input-group">
                    <label>Р’С‹Р±РµСЂРёС‚Рµ РЅРµРґРµР»СЋ:</label>
                    <input type="week" id="weekSelector" class="week-selector">
                </div>

                <div class="admin-columns">
                    <!-- РљРѕР»РѕРЅРєР° Р›СѓС‡С€РёРµ РІ СЃРєРѕСЂРѕСЃС‚Рё -->
                    <div class="admin-column">
                        <h3 class="admin-column-title">рџЏѓ Р›СѓС‡С€РёРµ РІ СЃРєРѕСЂРѕСЃС‚Рё</h3>
                        <div id="speedRankings"></div>
                    </div>

                    <!-- РљРѕР»РѕРЅРєР° Р›СѓС‡С€РёРµ РІ С‚РѕС‡РЅРѕСЃС‚Рё -->
                    <div class="admin-column">
                        <h3 class="admin-column-title">рџЋЇ Р›СѓС‡С€РёРµ РІ С‚РѕС‡РЅРѕСЃС‚Рё</h3>
                        <div id="accuracyRankings"></div>
                    </div>
                </div>

                <div class="admin-stats">
                    <div>РС‚РѕРіРѕ РѕС‡РєРѕРІ Р·Р° СЃРєРѕСЂРѕСЃС‚СЊ: <span id="speedTotal">0</span></div>
                    <div>РС‚РѕРіРѕ РѕС‡РєРѕРІ Р·Р° С‚РѕС‡РЅРѕСЃС‚СЊ: <span id="accuracyTotal">0</span></div>
                    <div>Р’СЃРµРіРѕ РѕС‡РєРѕРІ Р·Р° РЅРµРґРµР»СЋ: <span id="weekTotal">0</span></div>
                </div>

                <div class="admin-buttons">
                    <button class="admin-save-btn" onclick="saveWeekRankings()">рџ’ѕ РЎРѕС…СЂР°РЅРёС‚СЊ СЂРµР·СѓР»СЊС‚Р°С‚С‹</button>
                    <button class="admin-reset-btn" onclick="clearWeekRankings()">рџ—‘пёЏ РћС‡РёСЃС‚РёС‚СЊ С„РѕСЂРјСѓ</button>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn-yellow" onclick="showPage('mainPage')">в†ђ РќР° РіР»Р°РІРЅСѓСЋ</button>
            </div>
        </div>
    </div>

    <!-- РњРѕРґР°Р»СЊРЅРѕРµ РѕРєРЅРѕ РґР»СЏ РїРѕР»РЅРѕСЌРєСЂР°РЅРЅРѕРіРѕ РїСЂРѕСЃРјРѕС‚СЂР° -->
    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="fullscreenImage">
    </div>

    <!-- РџРѕРґРєР»СЋС‡Р°РµРј Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>

